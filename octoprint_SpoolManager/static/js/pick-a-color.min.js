!function(t){"use strict";t.fn.setColor=function(o){return t(this).val(o).trigger("change")},t.fn.pickAColor=function(o){var a="ontouchstart"in window,e=(parseInt(t(window).width(),10),"localStorage"in window&&null!==window.localStorage&&"object"==typeof JSON),n=document.all&&!window.atob,r=a?"touchstart.pickAColor":"mousedown.pickAColor",s=a?"touchmove.pickAColor":"mousemove.pickAColor",i=a?"touchend.pickAColor":"mouseup.pickAColor",l=a?"touchend.pickAColor":"click.pickAColor",d="dragging.pickAColor",c="endDrag.pickAColor",p=t.extend({showSpectrum:!0,showSavedColors:!0,saveColorsPerElement:!1,fadeMenuToggle:!0,showAdvanced:!0,showBasicColors:!0,showHexInput:!0,allowBlank:!1,basicColors:{white:"fff",red:"f00",orange:"f60",yellow:"ff0",green:"008000",blue:"00f",purple:"800080",black:"000"}},o);p.showAdvanced||p.showBasicColors||(p.showBasicColors=!0);var u=p.showSavedColors&&p.showAdvanced||p.showBasicColors&&p.showSavedColors||p.showBasicColors&&p.showAdvanced,h=function(){var o=t("<div>").addClass("btn-group"),a=t("<button type='button'>").addClass("btn color-dropdown dropdown-toggle"),e=t("<span>").addClass("color-preview current-color"),r=t("<span>").addClass("caret"),s=t("<div>").addClass("color-menu dropdown-menu");if(p.showHexInput||(a.addClass("no-hex"),s.addClass("no-hex")),o.append(a.append(e).append(r)),u||p.showSpectrum||s.addClass("small"),u){var i=t("<div>").addClass("color-menu-tabs"),l=p.showBasicColors?"savedColors-tab tab":"savedColors-tab tab tab-active";p.showBasicColors&&i.append(t("<span>").addClass("basicColors-tab tab tab-active").append(t("<a>").text("Basic Colors"))),p.showSavedColors&&i.append(t("<span>").addClass(l).append(t("<a>").text("Saved Colors"))),p.showAdvanced&&i.append(t("<span>").addClass("advanced-tab tab").append(t("<a>").text("Advanced"))),s.append(i)}if(p.showBasicColors){var d=t("<div>").addClass("basicColors-content active-content");p.showSpectrum&&d.append(t("<h6>").addClass("color-menu-instructions").text("Tap spectrum or drag band to change color"));var c=t("<ul>").addClass("basic-colors-list");t.each(p.basicColors,(function(o,a){var e=t("<li>").addClass("color-item"),r=t("<a>").addClass(o+" color-link"),s=t("<span>").addClass("color-preview "+o),i=t("<span>").addClass("color-label").text(o);if(r.append(s,i),s.append(),"#"!==a[0]&&(a="#"+a),s.css("background-color",a),p.showSpectrum){var l=t("<span>").addClass("color-box spectrum-"+o);n&&t.each([0,1],(function(e){"fff"!==a&&"000"!==o&&l.append(t("<span>").addClass(o+"-spectrum-"+e+" ie-spectrum"))}));var d=t("<span>").addClass("highlight-band");t.each([0,1,2],(function(){d.append(t("<span>").addClass("highlight-band-stripe"))})),r.append(l.append(d))}c.append(e.append(r))})),s.append(d.append(c))}if(p.showSavedColors){var h=p.showBasicColors?"inactive-content":"active-content",g=t("<div>").addClass("savedColors-content").addClass(h);g.append(t("<p>").addClass("saved-colors-instructions").text("Type in a color or use the spectrums to lighten or darken an existing color.")),s.append(g)}if(p.showAdvanced){var v=p.showBasicColors||p.showSavedColors?"inactive-content":"active-content",f=t("<div>").addClass("advanced-content").addClass(v).append(t("<h6>").addClass("advanced-instructions").text("Tap spectrum or drag band to change color")),C=t("<ul>").addClass("advanced-list"),m=t("<li>").addClass("hue-item"),b=t("<span>").addClass("hue-text").text("Hue: ").append(t("<span>").addClass("hue-value").text("0")),w=t("<span>").addClass("color-box spectrum-hue");n&&t.each([0,1,2,3,4,5,6],(function(o){w.append(t("<span>").addClass("hue-spectrum-"+o+" ie-spectrum hue"))}));var S=t("<span>").addClass("highlight-band");t.each([0,1,2],(function(){S.append(t("<span>").addClass("highlight-band-stripe"))})),C.append(m.append(b).append(w.append(S)));var y=t("<li>").addClass("lightness-item"),k=t("<span>").addClass("color-box spectrum-lightness"),x=t("<span>").addClass("lightness-text").text("Lightness: ").append(t("<span>").addClass("lightness-value").text("50%"));n&&t.each([0,1],(function(o){k.append(t("<span>").addClass("lightness-spectrum-"+o+" ie-spectrum"))}));var H=t("<span>").addClass("highlight-band");t.each([0,1,2],(function(){H.append(t("<span>").addClass("highlight-band-stripe"))})),C.append(y.append(x).append(k.append(H)));var A=t("<li>").addClass("saturation-item"),B=t("<span>").addClass("color-box spectrum-saturation");n&&t.each([0,1],(function(o){B.append(t("<span>").addClass("saturation-spectrum-"+o+" ie-spectrum"))}));var M=t("<span>").addClass("highlight-band");t.each([0,1,2],(function(){M.append(t("<span>").addClass("highlight-band-stripe"))}));var T=t("<span>").addClass("saturation-text").text("Saturation: ").append(t("<span>").addClass("saturation-value").text("100%"));C.append(A.append(T).append(B.append(M)));var I=t("<li>").addClass("preview-item").append(t("<span>").addClass("preview-text").text("Preview")),P=t("<span>").addClass("color-preview advanced").append("<button class='color-select btn btn-mini advanced' type='button'>Select</button>");C.append(I.append(P)),s.append(f.append(C))}return o.append(s),o},g={},v=8,f=2;if(p.showSavedColors){var C=[];if(e&&localStorage.allSavedColors)C=JSON.parse(localStorage.allSavedColors);else if(document.cookie.match("pickAColorSavedColors-allSavedColors=")){var m=document.cookie.split(";");t.each(m,(function(t){m[t].match("pickAColorSavedColors-allSavedColors=")&&(C=m[t].split("=")[1].split(","))}))}}var b={initialize:function(o){var a,e,n=t(this);n.on("change",(function(t){b.updatePreview(n)})),n.attr("name")||n.attr("name","pick-a-color-"+o),e=n.attr("name"),n.addClass("pick-a-color"),p.allowBlank&&n.val().match(/^\s+$|^$/)||(g.defaultColor=tinycolor(n.val()).toHex(),g.typedColor=g.defaultColor,n.val(g.defaultColor)),t(n).wrap('<div class="input-prepend input-append pick-a-color-markup" id="'+e+'">'),a=t(n.parent()),p.showHexInput?a.prepend('<span class="hex-pound add-on">#</span>').append(h()):a.append(h()),p.showHexInput||n.attr("type","hidden")},updatePreview:function(t){if(p.allowBlank?(g.typedColor=t.val().match(/^\s+$|^$/)?"":tinycolor(t.val()).toHex(),""===g.typedColor?t.siblings(".btn-group").find(".current-color").css("background","none"):t.siblings(".btn-group").find(".current-color").css("background-color","#"+g.typedColor)):(g.typedColor=tinycolor(t.val()).toHex(),t.siblings(".btn-group").find(".current-color").css("background-color","#"+g.typedColor)),p.showAdvanced){var o=t.val(),a=tinycolor(o).toHsl(),e=t.parent().find(".advanced-list"),n=parseInt(e.find(".color-box").first().width(),10),r=e.find(".spectrum-hue"),s=r.find(".highlight-band"),i=e.find(".hue-value"),l=s.outerWidth()/2,d=a.h/360*n;s.css("left",d-l);var c=e.find(".spectrum-saturation"),u=c.find(".highlight-band"),h=e.find(".saturation-value"),v=u.outerWidth()/2;d=a.s*n;u.css("left",d-v);var f=e.find(".spectrum-lightness"),C=f.find(".highlight-band"),m=e.find(".lightness-value"),w=C.outerWidth()/2;d=(1-a.l)*n;C.css("left",d-w),b.updateSaturationStyles(c,a.h,a.l),b.updateHueStyles(r,a.s,a.l),b.updateLightnessStyles(f,a.h,a.s),e.find(".color-preview").css("background-color","#"+o),i.text(Math.floor(a.h)),m.text(Math.floor(100*a.l)+"%"),h.text(Math.floor(100*a.s)+"%"),r.attr("data-value",a.h),c.attr("data-value",a.s),f.attr("data-value",a.l)}},pressPreviewButton:function(){var t=arguments[0].thisEvent;t.stopPropagation(),b.toggleDropdown(t.target)},openDropdown:function(o,e){t(".color-menu").each((function(){var o=t(this);if("block"===o.css("display")){var a=o.parents(".btn-group");b.closeDropdown(a,o)}})),p.fadeMenuToggle&&!a?t(e).fadeIn("fast"):t(e).show(),t(o).addClass("open")},closeDropdown:function(o,e){p.fadeMenuToggle&&!a?t(e).fadeOut("fast"):t(e).css("display","none"),t(o).removeClass("open")},closeDropdownIfOpen:function(){var t=arguments[0].button,o=arguments[0].menu;"block"===o.css("display")&&b.closeDropdown(t,o)},toggleDropdown:function(o){var a=t(o).parents(".pick-a-color-markup"),e=a.find(".btn-group"),n=a.find(".color-menu");"none"===n.css("display")?b.openDropdown(e,n):b.closeDropdown(e,n)},tabbable:function(){var o=t(this),a=o.parents(".pick-a-color-markup");o.click((function(){var o=t(this),e=o.attr("class").split(" ")[0].split("-")[0]+"-content",n=o.parents(".dropdown-menu").find("."+e);o.hasClass("tab-active")||(a.find(".tab-active").removeClass("tab-active"),a.find(".active-content").removeClass("active-content").addClass("inactive-content"),o.addClass("tab-active"),t(n).addClass("active-content").removeClass("inactive-content"))}))},getColorMultiplier:function(o,e,n){var r="basic"===n?parseInt(t(".color-box").first().width(),10):parseInt(t(".advanced-list").find(".color-box").first().width(),10);0===r&&(r="basic"===n?a?160:200:a?160:300);var s=r/2,i=e/r;return"bidirectional"===o?i<=.5?(1-e/s)/2:-(e-s)/s/2:"darkenRight"===o?-i/2:i/2},modifyHSLLightness:function(t,o){var a=t;return a.l+=o,a.l=Math.min(Math.max(0,a.l),1),tinycolor(a).toHslString()},getMoveableArea:function(t){var o={},a=t.parent(),e=t.outerWidth(),n=a.width(),r=a.offset();return o.minX=r.left,o.maxX=n-e,o},moveHighlightBand:function(o,e,n){var r=.75*t(".highlight-band").first().outerWidth(),s=(a?n.originalEvent.pageX:n.pageX)-e.minX-r;s=Math.max(0,Math.min(s,e.maxX)),o.css("position","absolute"),o.css("left",s)},horizontallyDraggable:function(){t(this).on(r,(function(o){o.preventDefault();var a=t(o.delegateTarget);a.css("cursor","-webkit-grabbing"),a.css("cursor","-moz-grabbing");var e=b.getMoveableArea(a);t(document).on(s,(function(t){a.trigger(d),b.moveHighlightBand(a,e,t)})).on(i,(function(o){t(document).off(s),t(document).off(d),a.css("cursor","-webkit-grab"),a.css("cursor","-moz-grab"),a.trigger(c),t(document).off(i)}))})).on(i,(function(o){o.stopPropagation(),t(document).off(s),t(document).off(d)}))},modifyHighlightBand:function(t,o,a){var e=-o,n=t.find(".highlight-band-stripe"),r="lightenRight"===a?b.modifyHSLLightness({h:0,s:0,l:.5},e):b.modifyHSLLightness({h:0,s:0,l:.05},e);t.css("border-color",r),n.css("background-color",r)},calculateHighlightedColor:function(){var o,a,e,n,r,s,i,l,d=t(this),c=d.parent(),u=t(".highlight-band").first().outerWidth()/2,h=arguments[0].type;if("basic"===h){var g=c.attr("class").split("-")[2],v=p.basicColors[g];switch(a=tinycolor(v).toHsl(),v){case"fff":o="darkenRight";break;case"000":o="lightenRight";break;default:o="bidirectional"}}else{var f=d.parents(".advanced-list");n=arguments[0].hsl.s,i=f.find(".spectrum-hue"),e=arguments[0].hsl.h,s=f.find(".spectrum-saturation"),l=f.find(".lightness-value"),r=f.find(".color-preview"),a={h:arguments[0].hsl.h,l:.5,s:arguments[0].hsl.s},o="bidirectional"}var C=parseInt(d.css("left"),10)+u,m=b.getColorMultiplier(o,C,h),w=b.modifyHSLLightness(a,m),S="#"+tinycolor(w).toHex(),y=w.split("(")[1].split(")")[0].split(",")[2],k=parseInt(y.split("%")[0],10)/100;return"basic"===h?(c.siblings(".color-preview").css("background-color",S),c.prev(".color-label").replaceWith('<button class="color-select btn btn-mini" type="button">Select</button>'),"darkenRight"!==o&&b.modifyHighlightBand(d,m,o)):(r.css("background-color",S),l.text(y),b.updateSaturationStyles(s,e,k),b.updateHueStyles(i,n,k),b.modifyHighlightBand(t(".advanced-content .highlight-band"),m,o)),"basic"===h?tinycolor(w).toHex():k},updateSavedColorPreview:function(o){t.each(o,(function(a){var e=t(o[a]),n=e.attr("class");e.find(".color-preview").css("background-color",n)}))},updateSavedColorMarkup:function(o,a){if(a=a||C,p.showSavedColors&&a.length>0){p.saveColorsPerElement||(o=t(".savedColors-content"),a=C);var e=v*f;a=a.slice(0,e);var n=t("<ul>").addClass("saved-color-col 0"),r=t("<ul>").addClass("saved-color-col 1");t.each(a,(function(o,a){var e=t("<li>").addClass("color-item"),s=t("<a>").addClass(a);s.append(t("<span>").addClass("color-preview")),s.append(t("<span>").addClass("color-label").text(a)),e.append(s),o%2==0?n.append(e):r.append(e)})),o.html(n),o.append(r);var s=t(o).find("a");b.updateSavedColorPreview(s)}},setSavedColorsCookie:function(t,o){var a=new Date,e=new Date(a.getTime()+31536e7);e=e.toGMTString(),document.cookie=void 0===o?"pickAColorSavedColors-allSavedColors="+t+";expires="+e:"pickAColorSavedColors-"+o+"="+t+"; expires="+e},saveColorsToLocalStorage:function(t,o){if(e)if(void 0===o)try{localStorage.allSavedColors=JSON.stringify(t)}catch(t){localStorage.clear()}else try{localStorage["pickAColorSavedColors-"+o]=JSON.stringify(t)}catch(t){localStorage.clear()}else b.setSavedColorsCookie(t,o)},removeFromArray:function(o,a){-1!==t.inArray(a,o)&&o.splice(t.inArray(a,o),1)},updateSavedColors:function(t,o,a){b.removeFromArray(o,t),o.unshift(t),b.saveColorsToLocalStorage(o,a)},addToSavedColors:function(t,o,a){if(p.showSavedColors&&void 0!==t)if("#"!=t[0]&&(t="#"+t),b.updateSavedColors(t,C),p.saveColorsPerElement){var e=o.colors,n=o.dataAttr;b.updateSavedColors(t,e,n),b.updateSavedColorMarkup(a,e)}else b.updateSavedColorMarkup(a,C)},selectFromBasicColors:function(){var o=t(this).find("span:first").css("background-color"),a=arguments[0].els,e=arguments[0].savedColorsInfo;o=tinycolor(o).toHex(),t(a.thisEl).val(o),t(a.thisEl).trigger("change"),b.updatePreview(a.thisEl),b.addToSavedColors(o,e,a.savedColorsContent),b.closeDropdown(a.colorPreviewButton,a.colorMenu)},tapSpectrum:function(){var o=arguments[0].thisEvent,e=arguments[0].savedColorsInfo,n=arguments[0].els,r=arguments[0].mostRecentClick;o.stopPropagation();var s=t(this).find(".highlight-band"),i=b.getMoveableArea(s);a?b.moveHighlightBand(s,i,r):b.moveHighlightBand(s,i,o);var l=b.calculateHighlightedColor.apply(s,[{type:"basic"}]);b.addToSavedColors(l,e,n.savedColorsContent),n.touchInstructions.html("Press 'select' to choose this color")},executeUnlessScrolled:function(){var o,e,n=arguments[0].thisFunction,s=arguments[0].theseArguments;t(this).on(r,(function(a){o=t(window).scrollTop(),e=a})).on(l,(function(r){var i=o-t(window).scrollTop();a&&Math.abs(i)>0||(s.thisEvent=r,s.mostRecentClick=e,n.apply(t(this),[s]))}))},updateSaturationStyles:function(o,a,e){var r=(100*e).toString()+"%",s="#"+tinycolor("hsl("+a+",0%,"+r).toHex(),i="#"+tinycolor("hsl("+a+",50%,"+r).toHex(),l="#"+tinycolor("hsl("+a+",100%,"+r).toHex(),d="",c=(t.each(["-webkit-linear-gradient","-o-linear-gradient"],(function(t,o){d+="background-image: "+o+"(left, "+s+" 0%, "+i+" 50%, "+l+" 100%);"})),"progid:DXImageTransform.Microsoft.gradient(startColorstr='"+s+"', endColorstr='"+i+"', GradientType=1)"),p="progid:DXImageTransform.Microsoft.gradient(startColorstr='"+i+"', endColorstr='"+l+"', GradientType=1)";if(d="background-image: -moz-linear-gradient(left center, "+s+" 0%, "+i+" 50%, "+l+" 100%);background-image: linear-gradient(to right, "+s+" 0%, "+i+" 50%, "+l+" 100%); background-image: -webkit-gradient(linear, left top, right top,color-stop(0, "+s+"),color-stop(0.5, "+i+"),color-stop(1, "+l+"));"+d,n){var u=t(o).find(".saturation-spectrum-0"),h=t(o).find(".saturation-spectrum-1");u.css("filter",c),h.css("filter",p)}else o.attr("style",d)},updateLightnessStyles:function(o,a,e){var r=(100*e).toString()+"%",s="#"+tinycolor("hsl("+a+","+r+",100%)").toHex(),i="#"+tinycolor("hsl("+a+","+r+",50%)").toHex(),l="#"+tinycolor("hsl("+a+","+r+",0%)").toHex(),d="",c=(t.each(["-webkit-linear-gradient","-o-linear-gradient"],(function(t,o){d+="background-image: "+o+"(left, "+s+" 0%, "+i+" 50%, "+l+" 100%);"})),"progid:DXImageTransform.Microsoft.gradient(startColorstr='"+s+"', endColorstr='"+i+"', GradientType=1)"),p="progid:DXImageTransform.Microsoft.gradient(startColorstr='"+i+"', endColorstr='"+l+"', GradientType=1)";if(d="background-image: -moz-linear-gradient(left center, "+s+" 0%, "+i+" 50%, "+l+" 100%); background-image: linear-gradient(to right, "+s+" 0%, "+i+" 50%, "+l+" 100%); background-image: -webkit-gradient(linear, left top, right top, color-stop(0, "+s+"), color-stop(0.5, "+i+"), color-stop(1, "+l+")); "+d,n){var u=t(o).find(".lightness-spectrum-0"),h=t(o).find(".lightness-spectrum-1");u.css("filter",c),h.css("filter",p)}else o.attr("style",d)},updateHueStyles:function(o,a,e){var r=(100*a).toString()+"%",s=(100*e).toString()+"%",i="#"+tinycolor("hsl(0,"+r+","+s+")").toHex(),l="#"+tinycolor("hsl(60,"+r+","+s+")").toHex(),d="#"+tinycolor("hsl(120,"+r+","+s+")").toHex(),c="#"+tinycolor("hsl(180,"+r+","+s+")").toHex(),p="#"+tinycolor("hsl(240,"+r+","+s+")").toHex(),u="#"+tinycolor("hsl(300,"+r+","+s+")").toHex(),h="#"+tinycolor("hsl(0,"+r+","+s+")").toHex(),g="progid:DXImageTransform.Microsoft.gradient(startColorstr='"+i+"', endColorstr='"+l+"', GradientType=1)",v="progid:DXImageTransform.Microsoft.gradient(startColorstr='"+l+"', endColorstr='"+d+"', GradientType=1)",f="progid:DXImageTransform.Microsoft.gradient(startColorstr='"+d+"', endColorstr='"+c+"', GradientType=1)",C="progid:DXImageTransform.Microsoft.gradient(startColorstr='"+c+"', endColorstr='"+p+"', GradientType=1)",m="progid:DXImageTransform.Microsoft.gradient(startColorstr='"+p+"', endColorstr='"+u+"', GradientType=1)",b="progid:DXImageTransform.Microsoft.gradient(startColorstr='"+u+"', endColorstr='"+h+"', GradientType=1)",w="";t.each(["-webkit-linear-gradient","-o-linear-gradient"],(function(t,o){w+="background-image: "+o+"(left, "+i+" 0%, "+l+" 17%, "+d+" 24%, "+c+" 51%, "+p+" 68%, "+u+" 85%, "+h+" 100%);"}));if(w+="background-image: -webkit-gradient(linear, left top, right top,color-stop(0%, "+i+"),color-stop(17%, "+l+"),color-stop(34%, "+d+"),color-stop(51%, "+c+"),color-stop(68%, "+p+"),color-stop(85%, "+u+"),color-stop(100%, "+h+"));background-image: linear-gradient(to right, "+i+" 0%, "+l+" 17%, "+d+" 24%,"+c+" 51%,"+p+" 68%,"+u+" 85%,"+h+" 100%); background-image: -moz-linear-gradient(left center, "+i+" 0%, "+l+" 17%, "+d+" 24%, "+c+" 51%, "+p+" 68%, "+u+" 85%, "+h+" 100%);",n){var S=t(o).find(".hue-spectrum-0"),y=t(o).find(".hue-spectrum-1"),k=t(o).find(".hue-spectrum-2"),x=t(o).find(".hue-spectrum-3"),H=t(o).find(".hue-spectrum-4"),A=t(o).find(".hue-spectrum-5");S.css("filter",g),y.css("filter",v),k.css("filter",f),x.css("filter",C),H.css("filter",m),A.css("filter",b)}else o.attr("style",w)},getHighlightedHue:function(){var o=t(this),e=o.outerWidth()/2,n=parseInt(o.css("left"),10)+e,r=o.parents(".advanced-list"),s=r.find(".color-preview"),i=r.find(".spectrum-lightness"),l=r.find(".spectrum-saturation"),d=parseInt(r.find(".color-box").first().width(),10),c=r.find(".hue-value"),p=arguments[0].l,u=arguments[0].s,h=(100*u).toString()+"%",g=(100*p).toString()+"%";0===d&&(d=a?160:300);var v=Math.floor(n/d*360),f="hsl("+v+","+h+","+g+")";return f="#"+tinycolor(f).toHex(),s.css("background-color",f),c.text(v),b.updateLightnessStyles(i,v,u),b.updateSaturationStyles(l,v,p),v},getHighlightedSaturation:function(){var o=t(this),e=o.outerWidth()/2,n=parseInt(o.css("left"),10)+e,r=o.parents(".advanced-list"),s=r.find(".color-preview"),i=r.find(".spectrum-lightness"),l=r.find(".spectrum-hue"),d=r.find(".saturation-value"),c=parseInt(r.find(".color-box").first().width(),10),p=arguments[0].l,u=(100*p).toString()+"%",h=arguments[0].h;0===c&&(c=a?160:300);var g=n/c,v=Math.round(100*g).toString()+"%",f="hsl("+h+","+v+","+u+")";return f="#"+tinycolor(f).toHex(),s.css("background-color",f),d.text(v),b.updateLightnessStyles(i,h,g),b.updateHueStyles(l,g,p),g},updateAdvancedInstructions:function(t){t.html("Press the color preview to choose this color")}};return this.each((function(o){b.initialize.apply(this,[o]);var a,n={thisEl:t(this),thisWrapper:t(this).parent(),colorTextInput:t(this).find("input"),colorMenuLinks:t(this).parent().find(".color-menu li a"),colorPreviewButton:t(this).parent().find(".btn-group"),colorMenu:t(this).parent().find(".color-menu"),colorSpectrums:t(this).parent().find(".color-box"),basicSpectrums:t(this).parent().find(".basicColors-content .color-box"),touchInstructions:t(this).parent().find(".color-menu-instructions"),advancedInstructions:t(this).parent().find(".advanced-instructions"),highlightBands:t(this).parent().find(".highlight-band"),basicHighlightBands:t(this).parent().find(".basicColors-content .highlight-band")};if(u&&(n.tabs=n.thisWrapper.find(".tab")),p.showSavedColors&&(n.savedColorsContent=n.thisWrapper.find(".savedColors-content"),p.saveColorsPerElement))if(a={colors:[],dataObj:t(this).data()},t.each(a.dataObj,(function(t){a.dataAttr=t})),e&&localStorage["pickAColorSavedColors-"+a.dataAttr])a.colors=JSON.parse(localStorage["pickAColorSavedColors-"+a.dataAttr]);else if(document.cookie.match("pickAColorSavedColors-"+a.dataAttr))for(var r=document.cookie.split(";"),s=0;s<r.length;s++)r[s].match(a.dataAttr)&&(a.colors=r[s].split("=")[1].split(","));else a.colors=C;if(p.showAdvanced&&(n.advancedSpectrums=n.thisWrapper.find(".advanced-list").find(".color-box"),n.advancedHighlightBands=n.thisWrapper.find(".advanced-list").find(".highlight-band"),n.hueSpectrum=n.thisWrapper.find(".spectrum-hue"),n.lightnessSpectrum=n.thisWrapper.find(".spectrum-lightness"),n.saturationSpectrum=n.thisWrapper.find(".spectrum-saturation"),n.hueHighlightBand=n.thisWrapper.find(".spectrum-hue .highlight-band"),n.lightnessHighlightBand=n.thisWrapper.find(".spectrum-lightness .highlight-band"),n.saturationHighlightBand=n.thisWrapper.find(".spectrum-saturation .highlight-band"),n.advancedPreview=n.thisWrapper.find(".advanced-content .color-preview")),b.addToSavedColors(g.defaultColor,a,n.savedColorsContent),b.updatePreview(n.thisEl),n.thisEl.focus((function(){var o=t(this);g.typedColor=o.val(),p.allowBlank||o.val(""),b.toggleDropdown(n.colorPreviewButton,n.ColorMenu)})).blur((function(){var o=t(this);g.newValue=o.val(),g.newValue.match(/^\s+$|^$/)?p.allowBlank||o.val(g.typedColor):(g.newValue=tinycolor(g.newValue).toHex(),o.val(g.newValue),b.addToSavedColors(g.newValue,a,n.savedColorsContent)),b.updatePreview(o)})),b.executeUnlessScrolled.apply(n.colorPreviewButton,[{thisFunction:b.pressPreviewButton,theseArguments:{}}]),b.executeUnlessScrolled.apply(t(document),[{thisFunction:b.closeDropdownIfOpen,theseArguments:{button:n.colorPreviewButton,menu:n.colorMenu}}]),n.colorMenu.on(l,(function(t){t.stopPropagation()})),n.thisEl.on(l,(function(t){t.stopPropagation()})),b.executeUnlessScrolled.apply(n.colorMenuLinks,[{thisFunction:b.selectFromBasicColors,theseArguments:{els:n,savedColorsInfo:a}}]),u&&b.tabbable.apply(n.tabs),(p.showSpectrum||p.showAdvanced)&&b.horizontallyDraggable.apply(n.highlightBands),p.showSpectrum&&(b.executeUnlessScrolled.apply(n.basicSpectrums,[{thisFunction:b.tapSpectrum,theseArguments:{savedColorsInfo:a,els:n}}]),t(n.basicHighlightBands).on(d,(function(t){t.target;b.calculateHighlightedColor.apply(this,[{type:"basic"}])})).on(c,(function(t){var o=t.delegateTarget,e=b.calculateHighlightedColor.apply(o,[{type:"basic"}]);b.addToSavedColors(e,a,n.savedColorsContent)}))),p.showAdvanced){function h(){return{h:t(n.hueSpectrum).attr("data-value"),s:t(n.saturationSpectrum).attr("data-value"),l:t(n.lightnessSpectrum).attr("data-value")}}t(n.hueHighlightBand).on(d,(function(o){var a=b.getHighlightedHue.apply(this,[h()]);t(n.hueSpectrum).attr("data-value",a)})),t(n.lightnessHighlightBand).on(d,(function(){b.calculateHighlightedColor.apply(this,[{type:"advanced",hsl:h()}])})).on(i,(function(){var o=b.calculateHighlightedColor.apply(this,[{type:"advanced",hsl:h()}]);t(n.lightnessSpectrum).attr("data-value",o)})),t(n.saturationHighlightBand).on(d,(function(){b.getHighlightedSaturation.apply(this,[h()])})).on(c,(function(){var o=b.getHighlightedSaturation.apply(this,[h()]);t(n.saturationSpectrum).attr("data-value",o)})),t(n.advancedHighlightBand).on(c,(function(){b.updateAdvancedInstructions(n.advancedInstructions)})),t(n.lightnessSpectrum).click((function(o){o.stopPropagation();var a=t(this).find(".highlight-band"),e=b.getMoveableArea(a);b.moveHighlightBand(a,e,o);var r=b.calculateHighlightedColor.apply(a,[{type:"advanced",hsl:h()}]);t(n.lightnessSpectrum).attr("data-value",r)})),t(n.hueSpectrum).click((function(o){o.stopPropagation();var a=t(this).find(".highlight-band"),e=b.getMoveableArea(a);b.moveHighlightBand(a,e,o);var r=b.getHighlightedHue.apply(a,[h()]);t(n.hueSpectrum).attr("data-value",r)})),t(n.saturationSpectrum).click((function(o){o.stopPropagation();var a=t(this).find(".highlight-band"),e=b.getMoveableArea(a);b.moveHighlightBand(a,e,o);var r=b.getHighlightedSaturation.apply(a,[h()]);t(n.saturationSpectrum).attr("data-value",r)})),t(n.advancedSpectrums).click((function(){b.updateAdvancedInstructions(n.advancedInstructions)})),t(n.advancedPreview).click((function(){var o=tinycolor(t(this).css("background-color")).toHex();t(n.thisEl).val(o),t(n.thisEl).trigger("change"),b.updatePreview(n.thisEl),b.addToSavedColors(o,a,n.savedColorsContent),b.closeDropdown(n.colorPreviewButton,n.colorMenu)}))}p.showSavedColors&&(t(n.savedColorsContent).click((function(o){var e=t(o.target);if(e.is("SPAN")||e.is("A")){var r=e.is("SPAN")?e.parent().attr("class").split("#")[1]:e.attr("class").split("#")[1];t(n.thisEl).val(r),t(n.thisEl).trigger("change"),b.updatePreview(n.thisEl),b.closeDropdown(n.colorPreviewButton,n.colorMenu),b.addToSavedColors(r,a,n.savedColorsContent)}})),p.saveColorsPerElement?p.saveColorsPerElement&&b.updateSavedColorMarkup(n.savedColorsContent,a.colors):b.updateSavedColorMarkup(n.savedColorsContent,C))}))}}(jQuery);
